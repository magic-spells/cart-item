!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).CartItem={})}(this,function(t){"use strict";class CartItem extends HTMLElement{#t="ready";#e=!1;#s={};static get observedAttributes(){return["data-state","data-key"]}attributeChangedCallback(t,e,s){e!==s&&"data-state"===t&&(this.#t=s||"ready")}constructor(){super(),this.#t=this.getAttribute("data-state")||"ready",this.#s={click:this.#n.bind(this),change:this.#i.bind(this),transitionEnd:this.#a.bind(this)}}connectedCallback(){this.content=this.querySelector("cart-item-content"),this.processing=this.querySelector("cart-item-processing"),this.#r()}disconnectedCallback(){this.#h()}#r(){this.addEventListener("click",this.#s.click),this.addEventListener("change",this.#s.change),this.addEventListener("transitionend",this.#s.transitionEnd)}#h(){this.removeEventListener("click",this.#s.click),this.removeEventListener("change",this.#s.change),this.removeEventListener("transitionend",this.#s.transitionEnd)}get state(){return this.#t}get cartKey(){return this.getAttribute("data-key")}#n(t){t.target.closest('[data-action="remove"]')&&(t.preventDefault(),this.#c())}#i(t){const e=t.target.closest("[data-cart-quantity]");e&&this.#o(e.value)}#a(t){"height"===t.propertyName&&this.#e&&this.remove()}#c(){this.dispatchEvent(new CustomEvent("cart-item:remove",{bubbles:!0,detail:{cartKey:this.cartKey,element:this}}))}#o(t){this.dispatchEvent(new CustomEvent("cart-item:quantity-change",{bubbles:!0,detail:{cartKey:this.cartKey,quantity:parseInt(t),element:this}}))}setState(t){["ready","processing","destroying"].includes(t)&&this.setAttribute("data-state",t)}destroyYourself(){if(this.#e)return;this.#e=!0,this.setState("destroying");const t=this.offsetHeight;this.style.height=`${t}px`,this.offsetHeight;const e=getComputedStyle(this).getPropertyValue("--cart-item-destroying-duration")||"400ms";this.style.transition=`all ${e} ease`,this.style.height="0px"}}class CartItemContent extends HTMLElement{constructor(){super()}}class CartItemProcessing extends HTMLElement{constructor(){super()}}customElements.define("cart-item",CartItem),customElements.define("cart-item-content",CartItemContent),customElements.define("cart-item-processing",CartItemProcessing),t.CartItem=CartItem,t.CartItemContent=CartItemContent,t.CartItemProcessing=CartItemProcessing});
